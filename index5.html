<html>
  <head>
    <meta charset="utf-8" />
    <title>Subscription Expired</title>

    <style>
      * {
        box-sizing: border-box;
      }

      html,
      body {
        margin: 0;
        padding: 0;
        overflow: hidden;
        background: transparent;
      }

      body {
        font-family: 'Segoe UI', 'Roboto', system-ui, sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }

      /* Container */
      .subscription-dialog {
        width: 470px;
        border: 2px solid rgba(0, 0, 0, 0.58);
        background: white;
        display: flex;
        flex-direction: column;
      }

      /* Header */
      .header {
        height: 52px;
        padding: 15px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        flex-shrink: 0;
      }

      .logo-section {
        display: inline-grid;
        grid-template-columns: max-content;
        grid-template-rows: max-content;
        align-items: start;
        justify-items: start;
        line-height: 0;
        flex-shrink: 0;
      }

      .logo-wrapper {
        grid-column: 1;
        grid-row: 1;
        width: 39.337px;
        height: 40px;
      }

      .logo-wrapper svg {
        display: block;
        width: 100%;
        height: 100%;
      }

      .brand-text {
        grid-column: 1;
        grid-row: 1;
        display: flex;
        flex-direction: column;
        align-items: start;
        margin-left: 49.34px;
        height: 44px;
        width: 115.656px;
        padding-bottom: 2px;
        white-space: pre-wrap;
      }

      .brand-name {
        font-family: 'Segoe UI', sans-serif;
        font-weight: 700;
        font-size: 14px;
        line-height: 20px;
        color: #7fc023;
        margin: 0;
        min-width: 100%;
        width: min-content;
        flex-shrink: 0;
      }

      .product-name {
        font-family: 'Segoe UI', sans-serif;
        font-weight: 600;
        font-size: 22px;
        line-height: 24px;
        color: #535353;
        margin: 0;
        width: 169px;
        flex-shrink: 0;
      }

      .close-button {
        width: 12.611px;
        height: 16.321px;
        background: transparent;
        border: none;
        padding: 0;
        cursor: pointer;
        flex-shrink: 0;
        color: #666;
      }

      .close-button svg {
        display: block;
        width: 100%;
        height: 100%;
      }

      .close-button:hover {
        opacity: 0.7;
      }

      /* Content */
      .content {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 20px 0;
        gap: 17px;
        width: 100%;
        flex-shrink: 0;
      }

      .expired-message {
        font-family: 'Roboto', sans-serif;
        font-weight: 500;
        font-size: 18px;
        line-height: 0;
        text-align: center;
        color: rgba(0, 0, 0, 0.5);
        margin: 0;
        min-width: 100%;
        width: min-content;
        white-space: pre-wrap;
        flex-shrink: 0;
      }

      .expired-message span {
        line-height: normal;
      }

      .expired-text {
        color: #ce0707;
      }

      .icon-container {
        width: 75px;
        height: 75px;
        flex-shrink: 0;
      }

      .icon-container svg {
        display: block;
        width: 100%;
        height: 100%;
      }

      .description {
        font-family: 'Roboto', sans-serif;
        font-weight: 500;
        font-size: 14px;
        line-height: normal;
        text-align: center;
        color: rgba(0, 0, 0, 0.7);
        margin: 0;
        flex-shrink: 0;
      }

      .description-line {
        display: block;
      }

      .description-line:not(:first-child) {
        margin-top: 22px;
      }

      .question {
        font-family: 'Roboto', sans-serif;
        font-weight: 500;
        font-size: 14px;
        line-height: normal;
        text-align: center;
        color: rgba(0, 0, 0, 0.7);
        margin: 0;
        min-width: 100%;
        width: min-content;
        white-space: pre-wrap;
        flex-shrink: 0;
      }

      .button-wrapper {
        display: inline-grid;
        grid-template-columns: max-content;
        grid-template-rows: max-content;
        align-items: start;
        justify-items: start;
        line-height: 0;
        flex-shrink: 0;
        position: relative;
      }

      .button-bg {
        grid-column: 1;
        grid-row: 1;
        width: 160px;
        height: 44px;
      }

      .button-bg svg {
        display: block;
        width: 100%;
        height: 100%;
      }

      .renew-button {
        grid-column: 1;
        grid-row: 1;
        margin-left: 38.13px;
        margin-top: 12.95px;
        font-family: 'Roboto', sans-serif;
        font-weight: 400;
        font-size: 14px;
        line-height: normal;
        color: white;
        background: transparent;
        border: none;
        padding: 0;
        cursor: pointer;
      }

      .renew-button:hover {
        opacity: 0.9;
      }

      /* Footer */
      .footer {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 15px;
        width: 100%;
        flex-shrink: 0;
      }

      .checkbox-container {
        display: flex;
        align-items: center;
        gap: 10px;
        flex: 1 0 0;
        min-width: 1px;
        min-height: 1px;
      }

      .checkbox-wrapper {
        width: 16.716px;
        height: 15px;
        flex-shrink: 0;
        position: relative;
      }

      .checkbox {
        position: absolute;
        inset: 0;
        width: 100%;
        height: 100%;
        margin: 0;
        cursor: pointer;
        opacity: 0;
        z-index: 1;
      }

      .checkbox-custom {
        width: 100%;
        height: 100%;
        border: 1px solid rgba(0, 0, 0, 0.5);
        background: white;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .checkbox:checked + .checkbox-custom {
        background: #7fc023;
        border-color: #7fc023;
      }

      .checkbox-custom svg {
        display: none;
        width: 10px;
        height: 10px;
      }

      .checkbox:checked + .checkbox-custom svg {
        display: block;
      }

      .checkbox-label {
        font-family: 'Roboto', sans-serif;
        font-weight: 400;
        font-size: 13px;
        line-height: normal;
        color: black;
        margin: 0;
        white-space: pre-wrap;
        cursor: pointer;
        user-select: none;
        flex-shrink: 0;
      }
    </style>
  </head>

  <body>
    <div class="subscription-dialog">
      <!-- Header -->
      <div class="header">
        <div class="logo-section">
          <div class="logo-wrapper">
            <svg viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="20" cy="20" r="19" fill="#7fc023"/>
              <path d="M12 20L17.5 25.5L28 13" stroke="white" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <div class="brand-text">
            <p class="brand-name">PC HelpSoft</p>
            <p class="product-name">PC Cleaner</p>
          </div>
        </div>
        <button class="close-button" id="closeButton" aria-label="Close">
          <svg viewBox="0 0 13 17" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M1 1L11.5 15.5M11.5 1L1 15.5" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </button>
      </div>

      <!-- Content -->
      <div class="content">
        <p class="expired-message">
          <span>Your PC Cleaner subscription has </span>
          <span class="expired-text">EXPIRED</span>
        </p>

        <div class="icon-container">
          <svg viewBox="0 0 75 75" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="37.5" cy="37.5" r="36" fill="white" stroke="#ce0707" stroke-width="3"/>
            <circle cx="37.5" cy="37.5" r="28" fill="none" stroke="#ce0707" stroke-width="2"/>
            <!-- Clock hands -->
            <path d="M37.5 15V37.5L50 50" stroke="#ce0707" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
            <circle cx="37.5" cy="37.5" r="2.5" fill="#ce0707"/>
            <!-- Clock markers -->
            <circle cx="37.5" cy="12" r="2" fill="#ce0707"/>
            <circle cx="37.5" cy="63" r="2" fill="#ce0707"/>
            <circle cx="12" cy="37.5" r="2" fill="#ce0707"/>
            <circle cx="63" cy="37.5" r="2" fill="#ce0707"/>
          </svg>
        </div>

        <div class="description">
          <span class="description-line">To continue to keep your PC clean and optimized you</span>
          <span class="description-line">need to renew your subscription.</span>
        </div>

        <p class="question">Would you like to renew your subscription now?</p>

        <div class="button-wrapper">
          <div class="button-bg">
            <svg viewBox="0 0 160 44" fill="none" xmlns="http://www.w3.org/2000/svg">
              <rect width="160" height="44" rx="2" fill="#7fc023"/>
            </svg>
          </div>
          <button class="renew-button" id="renewButton">RENEW NOW</button>
        </div>
      </div>

      <!-- Footer -->
      <div class="footer">
        <div class="checkbox-container">
          <div class="checkbox-wrapper">
            <input type="checkbox" class="checkbox" id="doNotShowAgain">
            <div class="checkbox-custom">
              <svg viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M2 5L4 7L8 3" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
          </div>
          <label class="checkbox-label" for="doNotShowAgain">Do not show this window again</label>
        </div>
      </div>
    </div>

    <script>
      // Bridge function for communicating with Sciter host
      async function safeCall(method, payload) {
        if (!window.jsBridgeCall) {
          console.log('❌ jsBridgeCall not found');
          return;
        }
        try {
          const res = await window.jsBridgeCall(method, payload);
          console.log('➡️', method, payload);
          console.log('⬅️', res);
          return res;
        } catch (error) {
          console.error('Bridge call error:', error);
        }
      }

      // Initialize
      window.addEventListener('load', () => {
        safeCall('template:onReady', { type: 'subscription', ts: Date.now() });

        // Report dialog size to Sciter host
        const dialog = document.querySelector('.subscription-dialog');
        if (dialog) {
          setTimeout(() => {
            const width = dialog.offsetWidth;
            const height = dialog.offsetHeight;
            safeCall('template:onSize', { width, height });
          }, 100);
        }
      });

      // Close button
      document.getElementById('closeButton').addEventListener('click', () => {
        safeCall('template:onAction', { action: 'close_webview' });
      });

      // Renew button
      document.getElementById('renewButton').addEventListener('click', () => {
        const doNotShowAgain = document.getElementById('doNotShowAgain').checked;
        safeCall('template:onAction', {
          action: 'renew_subscription',
          doNotShowAgain: doNotShowAgain
        });
      });

      // Checkbox change
      document.getElementById('doNotShowAgain').addEventListener('change', (e) => {
        safeCall('template:onAction', {
          action: 'checkbox_changed',
          checked: e.target.checked
        });
      });
    </script>
  </body>
</html>
